<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>All-in-One Hub</title>
    <!-- Tailwind CSS for styling -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Google Fonts: Inter -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <!-- Custom CSS and Icon styles -->
    <style>
      body {
        font-family: "Inter", sans-serif;
        background-color: #f3f4f6; /* A light gray background */
      }
      /* Custom scrollbar for a cleaner look */
      ::-webkit-scrollbar {
        width: 8px;
      }
      ::-webkit-scrollbar-track {
        background: #f1f1f1;
      }
      ::-webkit-scrollbar-thumb {
        background: #888;
        border-radius: 10px;
      }
      ::-webkit-scrollbar-thumb:hover {
        background: #555;
      }
      /* Simple transition for interactive elements */
      .card {
        transition: transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out;
      }
      .card:hover {
        transform: translateY(-5px);
        box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1),
          0 4px 6px -2px rgba(0, 0, 0, 0.05);
      }
      /* Style for the app icons */
      .app-icon {
        transition: transform 0.2s ease-in-out;
      }
      .app-icon:hover {
        transform: scale(1.1);
      }
      /* Active tab style */
      .tab-active {
        border-color: #4f46e5;
        color: #4f46e5;
        background-color: #eef2ff;
      }
      .tab-button {
        transition: background-color 0.2s ease-in-out, color 0.2s ease-in-out,
          border-color 0.2s ease-in-out;
      }
    </style>
  </head>
  <body class="antialiased text-slate-800">
    <!-- Main Container -->
    <div class="container mx-auto p-4 md:p-8 max-w-7xl">
      <!-- Header -->
      <header class="mb-8 text-center">
        <h1 class="text-4xl md:text-5xl font-bold text-slate-900">
          Your Personal Hub
        </h1>
        <p class="text-slate-600 mt-2">
          Organize your notes, finances, and apps in one place.
        </p>
      </header>

      <!-- Tab Navigation -->
      <div class="mb-8">
        <div class="flex flex-wrap justify-center border-b border-slate-200">
          <button
            onclick="switchTab('money')"
            id="tab-money"
            class="tab-button text-lg font-semibold py-4 px-6 border-b-2 tab-active"
          >
            Money Management
          </button>
          <button
            onclick="switchTab('notes')"
            id="tab-notes"
            class="tab-button text-lg font-semibold text-slate-500 hover:text-slate-700 py-4 px-6 border-b-2 border-transparent"
          >
            My Notes
          </button>
          <button
            onclick="switchTab('links')"
            id="tab-links"
            class="tab-button text-lg font-semibold text-slate-500 hover:text-slate-700 py-4 px-6 border-b-2 border-transparent"
          >
            Quick Links
          </button>
          <button
            onclick="switchTab('ai')"
            id="tab-ai"
            class="tab-button text-lg font-semibold text-slate-500 hover:text-slate-700 py-4 px-6 border-b-2 border-transparent"
          >
            AI Hub
          </button>
        </div>
      </div>

      <!-- Content Sections -->
      <div id="content-sections">
        <!-- Money Management Card -->
        <div
          id="content-money"
          class="tab-content card bg-white p-6 rounded-2xl shadow-lg"
        >
          <div class="flex items-center mb-4">
            <div
              class="w-12 h-12 bg-indigo-100 rounded-full flex items-center justify-center mr-4"
            >
              <svg
                xmlns="http://www.w3.org/2000/svg"
                class="h-6 w-6 text-indigo-600"
                fill="none"
                viewBox="0 0 24 24"
                stroke="currentColor"
                stroke-width="2"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  d="M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"
                />
              </svg>
            </div>
            <h2 class="text-2xl font-bold">Money Management</h2>
          </div>
          <div class="text-center bg-slate-50 p-4 rounded-lg mb-6">
            <p class="text-sm text-slate-500 uppercase">Current Balance</p>
            <p id="balance" class="text-4xl font-bold text-indigo-600">
              $1,250.75
            </p>
          </div>
          <form
            id="transactionForm"
            class="grid grid-cols-1 md:grid-cols-4 gap-4 items-end"
          >
            <div class="md:col-span-2">
              <label
                for="description"
                class="block text-sm font-medium text-slate-700"
                >Description</label
              ><input
                type="text"
                id="description"
                placeholder="e.g., Groceries"
                class="mt-1 block w-full px-3 py-2 bg-white border border-slate-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"
                required
              />
            </div>
            <div>
              <label
                for="amount"
                class="block text-sm font-medium text-slate-700"
                >Amount</label
              ><input
                type="number"
                id="amount"
                placeholder="50.00"
                step="0.01"
                class="mt-1 block w-full px-3 py-2 bg-white border border-slate-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"
                required
              />
            </div>
            <div class="flex space-x-2">
              <button
                type="button"
                onclick="addTransaction('income')"
                class="w-full bg-green-500 hover:bg-green-600 text-white font-bold py-2 px-4 rounded-md transition duration-300"
              >
                Income</button
              ><button
                type="button"
                onclick="addTransaction('expense')"
                class="w-full bg-red-500 hover:bg-red-600 text-white font-bold py-2 px-4 rounded-md transition duration-300"
              >
                Expense
              </button>
            </div>
          </form>
          <div class="mt-6">
            <h3 class="text-lg font-semibold mb-2">Transaction History</h3>
            <div class="max-h-60 overflow-y-auto pr-2">
              <ul id="transactionList" class="space-y-2"></ul>
            </div>
          </div>
        </div>
        <!-- Notes Card -->
        <div
          id="content-notes"
          class="tab-content hidden card bg-white p-6 rounded-2xl shadow-lg"
        >
          <div class="flex items-center mb-4">
            <div
              class="w-12 h-12 bg-amber-100 rounded-full flex items-center justify-center mr-4"
            >
              <svg
                xmlns="http://www.w3.org/2000/svg"
                class="h-6 w-6 text-amber-600"
                fill="none"
                viewBox="0 0 24 24"
                stroke="currentColor"
                stroke-width="2"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"
                />
              </svg>
            </div>
            <h2 class="text-2xl font-bold">My Notes</h2>
          </div>
          <form id="noteForm" class="space-y-4">
            <div>
              <label
                for="noteDate"
                class="block text-sm font-medium text-slate-700"
                >Date</label
              ><input
                type="date"
                id="noteDate"
                class="mt-1 block w-full md:w-1/2 px-3 py-2 bg-white border border-slate-300 rounded-md shadow-sm focus:outline-none focus:ring-amber-500 focus:border-amber-500"
                required
              />
            </div>
            <div>
              <label
                for="noteContent"
                class="block text-sm font-medium text-slate-700"
                >Note</label
              ><textarea
                id="noteContent"
                rows="3"
                placeholder="Write your thoughts here..."
                class="mt-1 block w-full px-3 py-2 bg-white border border-slate-300 rounded-md shadow-sm focus:outline-none focus:ring-amber-500 focus:border-amber-500"
                required
              ></textarea>
            </div>
            <button
              type="submit"
              class="w-full md:w-auto bg-amber-500 hover:bg-amber-600 text-white font-bold py-2 px-6 rounded-md transition duration-300"
            >
              Add Note
            </button>
          </form>
          <div class="mt-6">
            <h3 class="text-lg font-semibold mb-2">Saved Notes</h3>
            <div
              id="notesList"
              class="max-h-80 overflow-y-auto space-y-3 pr-2"
            ></div>
          </div>
        </div>
        <!-- Quick Links Card -->
        <div
          id="content-links"
          class="tab-content hidden card bg-white p-6 rounded-2xl shadow-lg"
        >
          <div class="flex items-center mb-6">
            <div
              class="w-12 h-12 bg-sky-100 rounded-full flex items-center justify-center mr-4"
            >
              <svg
                xmlns="http://www.w3.org/2000/svg"
                class="h-6 w-6 text-sky-600"
                fill="none"
                viewBox="0 0 24 24"
                stroke="currentColor"
                stroke-width="2"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  d="M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"
                />
              </svg>
            </div>
            <h2 class="text-2xl font-bold">Quick Links</h2>
          </div>
          <form id="addLinkForm" class="space-y-4 mb-8">
            <h3 class="text-lg font-semibold">Add a New Link</h3>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
              <div>
                <label
                  for="linkName"
                  class="block text-sm font-medium text-slate-700"
                  >Link Name</label
                ><input
                  type="text"
                  id="linkName"
                  placeholder="e.g., Google"
                  class="mt-1 block w-full px-3 py-2 bg-white border border-slate-300 rounded-md shadow-sm focus:outline-none focus:ring-sky-500 focus:border-sky-500"
                  required
                />
              </div>
              <div>
                <label
                  for="linkUrl"
                  class="block text-sm font-medium text-slate-700"
                  >URL</label
                ><input
                  type="url"
                  id="linkUrl"
                  placeholder="https://google.com"
                  class="mt-1 block w-full px-3 py-2 bg-white border border-slate-300 rounded-md shadow-sm focus:outline-none focus:ring-sky-500 focus:border-sky-500"
                  required
                />
              </div>
            </div>
            <button
              type="submit"
              class="w-full md:w-auto bg-sky-500 hover:bg-sky-600 text-white font-bold py-2 px-6 rounded-md transition duration-300"
            >
              Add Link
            </button>
          </form>
          <div
            id="app-grid"
            class="grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 gap-4 text-center"
          ></div>
        </div>
        <!-- AI Hub Card -->
        <div id="content-ai" class="tab-content hidden">
          <div class="card bg-white p-6 rounded-2xl shadow-lg mb-8">
            <div class="flex items-center mb-6">
              <div
                class="w-12 h-12 bg-purple-100 rounded-full flex items-center justify-center mr-4"
              >
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  class="h-6 w-6 text-purple-600"
                  fill="none"
                  viewBox="0 0 24 24"
                  stroke="currentColor"
                  stroke-width="2"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"
                  />
                </svg>
              </div>
              <h2 class="text-2xl font-bold">AI Command Center</h2>
            </div>
            <form id="addAiLinkForm" class="space-y-4">
              <h3 class="text-lg font-semibold">Add AI Assistant</h3>
              <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                <div>
                  <label
                    for="aiName"
                    class="block text-sm font-medium text-slate-700"
                    >AI Name</label
                  ><input
                    type="text"
                    id="aiName"
                    placeholder="e.g., Gemini"
                    class="mt-1 block w-full px-3 py-2 bg-white border border-slate-300 rounded-md shadow-sm focus:outline-none focus:ring-purple-500 focus:border-purple-500"
                    required
                  />
                </div>
                <div>
                  <label
                    for="aiUrl"
                    class="block text-sm font-medium text-slate-700"
                    >Query URL</label
                  ><input
                    type="url"
                    id="aiUrl"
                    placeholder="https://gemini.google.com/app?q="
                    class="mt-1 block w-full px-3 py-2 bg-white border border-slate-300 rounded-md shadow-sm focus:outline-none focus:ring-purple-500 focus:border-purple-500"
                    required
                  />
                </div>
              </div>
              <div class="text-xs text-slate-500 pt-1">
                Note: Find the query URL by searching on the AI site and copying
                the URL. It usually ends with `q=` or `query=`.
              </div>
              <button
                type="submit"
                class="w-full md:w-auto bg-purple-500 hover:bg-purple-600 text-white font-bold py-2 px-6 rounded-md transition duration-300"
              >
                Add to Hub
              </button>
            </form>
          </div>
          <div class="card bg-white p-6 rounded-2xl shadow-lg">
            <div class="mb-4">
              <label
                for="ai-prompt"
                class="block text-sm font-medium text-slate-700"
                >Enter Your Prompt</label
              >
              <textarea
                id="ai-prompt"
                rows="4"
                class="mt-1 block w-full px-3 py-2 bg-white border border-slate-300 rounded-md shadow-sm focus:outline-none focus:ring-purple-500 focus:border-purple-500"
                placeholder="e.g., Explain quantum computing in simple terms"
              ></textarea>
            </div>
            <div
              id="ai-launcher-grid"
              class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"
            >
              <!-- AI Launchers will be injected here -->
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- JavaScript Logic -->
    <script>
      // --- DATA INITIALIZATION ---
      let transactions = [
        { id: 1, description: "Monthly Salary", amount: 2500, type: "income" },
        { id: 2, description: "Rent Payment", amount: 800, type: "expense" },
        { id: 3, description: "Groceries", amount: 145.25, type: "expense" },
        {
          id: 4,
          description: "Freelance Project",
          amount: 700,
          type: "income",
        },
      ];
      let notes = [
        {
          id: 1,
          date: "2025-09-28",
          content:
            "Finish the presentation for the quarterly review. Focus on Q3 growth metrics.",
        },
        {
          id: 2,
          date: "2025-09-27",
          content:
            "Call the dentist to schedule an appointment for a check-up.",
        },
      ];
      let appLinks = [
        {
          name: "Gmail",
          url: "https://mail.google.com",
          iconUrl:
            "https://t1.gstatic.com/faviconV2?client=SOCIAL&type=FAVICON&fallback_opts=TYPE,SIZE,URL&url=https://mail.google.com&size=64",
        },
        {
          name: "Calendar",
          url: "https://calendar.google.com",
          iconUrl:
            "https://t1.gstatic.com/faviconV2?client=SOCIAL&type=FAVICON&fallback_opts=TYPE,SIZE,URL&url=https://calendar.google.com&size=64",
        },
      ];
      let aiLinks = [
        { id: 1, name: "Gemini", queryUrl: "https://gemini.google.com/app?q=" },
        {
          id: 2,
          name: "Perplexity",
          queryUrl: "https://www.perplexity.ai/?q=",
        },
        { id: 3, name: "Google", queryUrl: "https://www.google.com/search?q=" },
      ];

      // --- DOM ELEMENTS ---
      const balanceEl = document.getElementById("balance");
      const transactionListEl = document.getElementById("transactionList");
      const descriptionInput = document.getElementById("description");
      const amountInput = document.getElementById("amount");
      const noteForm = document.getElementById("noteForm");
      const noteDateInput = document.getElementById("noteDate");
      const noteContentInput = document.getElementById("noteContent");
      const notesListEl = document.getElementById("notesList");
      const addLinkForm = document.getElementById("addLinkForm");
      const linkNameInput = document.getElementById("linkName");
      const linkUrlInput = document.getElementById("linkUrl");
      const appGridEl = document.getElementById("app-grid");
      const addAiLinkForm = document.getElementById("addAiLinkForm");
      const aiNameInput = document.getElementById("aiName");
      const aiUrlInput = document.getElementById("aiUrl");
      const aiPromptInput = document.getElementById("ai-prompt");
      const aiLauncherGridEl = document.getElementById("ai-launcher-grid");

      // --- TAB SWITCHING LOGIC ---
      window.switchTab = function (tabName) {
        document
          .querySelectorAll(".tab-content")
          .forEach((el) => el.classList.add("hidden"));
        document
          .querySelectorAll(".tab-button")
          .forEach((el) => el.classList.remove("tab-active"));
        document
          .getElementById(`content-${tabName}`)
          .classList.remove("hidden");
        document.getElementById(`tab-${tabName}`).classList.add("tab-active");
      };

      // --- MONEY MANAGEMENT LOGIC ---
      function formatCurrency(amount) {
        return new Intl.NumberFormat("en-US", {
          style: "currency",
          currency: "USD",
        }).format(amount);
      }
      function updateBalance() {
        const total = transactions.reduce(
          (acc, t) => (t.type === "income" ? acc + t.amount : acc - t.amount),
          0
        );
        balanceEl.textContent = formatCurrency(total);
      }
      function renderTransactions() {
        transactionListEl.innerHTML =
          transactions.length === 0
            ? '<p class="text-slate-500 text-center p-4">No transactions yet.</p>'
            : "";
        [...transactions].reverse().forEach((t) => {
          const li = document.createElement("li");
          li.innerHTML = `<div class="flex justify-between items-center p-3 bg-slate-50 rounded-lg"><span class="font-medium">${
            t.description
          }</span><div class="flex items-center space-x-4"><span class="${
            t.type === "income" ? "text-green-600" : "text-red-600"
          } font-semibold">${t.type === "income" ? "+" : "-"}${formatCurrency(
            t.amount
          )}</span><button onclick="deleteTransaction(${
            t.id
          })" class="text-slate-400 hover:text-red-500 transition-colors"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16" /></svg></button></div></div>`;
          transactionListEl.appendChild(li);
        });
      }
      window.addTransaction = function (type) {
        const description = descriptionInput.value.trim();
        const amount = parseFloat(amountInput.value);
        if (!description || isNaN(amount) || amount <= 0)
          return alert("Please enter a valid description and amount.");
        transactions.push({ id: Date.now(), description, amount, type });
        updateUI();
        descriptionInput.value = "";
        amountInput.value = "";
      };
      window.deleteTransaction = function (id) {
        transactions = transactions.filter((t) => t.id !== id);
        updateUI();
      };

      // --- NOTES LOGIC ---
      function renderNotes() {
        notesListEl.innerHTML =
          notes.length === 0
            ? '<p class="text-slate-500 text-center p-4">No notes saved. Add one above!</p>'
            : "";
        [...notes]
          .sort((a, b) => new Date(b.date) - new Date(a.date))
          .forEach((note) => {
            const noteEl = document.createElement("div");
            noteEl.className =
              "p-4 border border-slate-200 rounded-lg bg-slate-50";
            noteEl.innerHTML = `<div class="flex justify-between items-start"><div><p class="font-semibold text-slate-700">${new Date(
              note.date + "T00:00:00"
            ).toLocaleDateString("en-US", {
              year: "numeric",
              month: "long",
              day: "numeric",
            })}</p><p class="text-slate-600 mt-1">${
              note.content
            }</p></div><button onclick="deleteNote(${
              note.id
            })" class="text-slate-400 hover:text-red-500 transition-colors ml-4 flex-shrink-0"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16" /></svg></button></div>`;
            notesListEl.appendChild(noteEl);
          });
      }
      noteForm.addEventListener("submit", (e) => {
        e.preventDefault();
        const date = noteDateInput.value;
        const content = noteContentInput.value.trim();
        if (!date || !content)
          return alert("Please enter both date and note content.");
        notes.push({ id: Date.now(), date, content });
        updateUI();
        noteContentInput.value = "";
      });
      window.deleteNote = function (id) {
        notes = notes.filter((n) => n.id !== id);
        updateUI();
      };

      // --- APP LINKS LOGIC ---
      function renderAppLinks() {
        appGridEl.innerHTML = "";
        appLinks.forEach((app) => {
          const appEl = document.createElement("a");
          appEl.href = app.url;
          appEl.target = "_blank";
          appEl.rel = "noopener noreferrer";
          appEl.className =
            "app-icon flex flex-col items-center justify-center p-2 space-y-2";
          appEl.innerHTML = `<div class="w-16 h-16 p-1 bg-slate-100 rounded-2xl flex items-center justify-center"><img src="${app.iconUrl}" alt="${app.name} icon" class="w-12 h-12" onerror="this.src='https://placehold.co/64x64/e2e8f0/64748b?text=?';"></div><span class="text-sm font-medium text-slate-700">${app.name}</span>`;
          appGridEl.appendChild(appEl);
        });
      }
      addLinkForm.addEventListener("submit", (e) => {
        e.preventDefault();
        const name = linkNameInput.value.trim();
        let url = linkUrlInput.value.trim();
        if (!name || !url)
          return alert("Please provide both a name and a URL.");
        if (!/^https?:\/\//i.test(url)) {
          url = "https://" + url;
        }
        const iconUrl = `https://t1.gstatic.com/faviconV2?client=SOCIAL&type=FAVICON&fallback_opts=TYPE,SIZE,URL&url=${encodeURIComponent(
          url
        )}&size=64`;
        appLinks.push({ name, url, iconUrl });
        renderAppLinks();
        linkNameInput.value = "";
        linkUrlInput.value = "";
      });

      // --- AI HUB LOGIC ---
      function renderAiHub() {
        aiLauncherGridEl.innerHTML = "";
        if (aiLinks.length === 0) {
          aiLauncherGridEl.innerHTML =
            '<p class="text-slate-500 p-2 md:col-span-2 lg:col-span-3">No AI assistants added. Add one using the form above.</p>';
          return;
        }

        aiLinks.forEach((ai) => {
          const launcherCard = document.createElement("div");
          launcherCard.className =
            "flex flex-col justify-between p-4 bg-slate-50 rounded-lg border border-slate-200";

          const mainDomain = new URL(ai.queryUrl).hostname.replace("www.", "");

          launcherCard.innerHTML = `
                    <div>
                        <div class="flex justify-between items-start">
                            <div class="flex items-center gap-3">
                                <img src="https://t1.gstatic.com/faviconV2?client=SOCIAL&type=FAVICON&fallback_opts=TYPE,SIZE,URL&url=${encodeURIComponent(
                                  ai.queryUrl
                                )}&size=32" alt="" class="w-8 h-8" onerror="this.style.display='none'">
                                <span class="font-bold text-lg text-slate-800">${
                                  ai.name
                                }</span>
                            </div>
                            <button onclick="deleteAiLink(${
                              ai.id
                            })" class="text-slate-400 hover:text-red-500 transition-colors">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" /></svg>
                            </button>
                        </div>
                        <p class="text-xs text-slate-500 mt-1 ml-11">${mainDomain}</p>
                    </div>
                    <button onclick="launchAi(${
                      ai.id
                    })" class="mt-4 w-full bg-indigo-500 hover:bg-indigo-600 text-white font-bold py-2 px-4 rounded-md transition duration-300 flex items-center justify-center gap-2">
                        Send Prompt
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                          <path stroke-linecap="round" stroke-linejoin="round" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14" />
                        </svg>
                    </button>
                `;
          aiLauncherGridEl.appendChild(launcherCard);
        });
      }

      window.launchAi = function (id) {
        const ai = aiLinks.find((link) => link.id === id);
        const prompt = aiPromptInput.value.trim();
        if (!prompt) {
          alert("Please enter a prompt first!");
          return;
        }
        if (ai) {
          const url = ai.queryUrl + encodeURIComponent(prompt);
          window.open(url, "_blank");
        }
      };

      addAiLinkForm.addEventListener("submit", (e) => {
        e.preventDefault();
        const name = aiNameInput.value.trim();
        let url = aiUrlInput.value.trim();
        if (!name || !url) {
          return alert("Please provide both a name and a query URL.");
        }
        if (!url.includes("?")) {
          return alert(
            'The URL must be a query URL, usually ending with "q=" or "query=". Please search on the site and copy the resulting URL.'
          );
        }

        const newAi = { id: Date.now(), name, queryUrl: url };
        aiLinks.push(newAi);
        renderAiHub();

        aiNameInput.value = "";
        aiUrlInput.value = "";
      });

      window.deleteAiLink = function (id) {
        aiLinks = aiLinks.filter((ai) => ai.id !== id);
        renderAiHub();
      };

      // --- GLOBAL UI UPDATE ---
      function updateUI() {
        updateBalance();
        renderTransactions();
        renderNotes();
        renderAppLinks();
        renderAiHub();
      }

      // --- INITIAL RENDER ON PAGE LOAD ---
      document.addEventListener("DOMContentLoaded", () => {
        noteDateInput.valueAsDate = new Date();
        updateUI();
      });
    </script>
  </body>
</html>
